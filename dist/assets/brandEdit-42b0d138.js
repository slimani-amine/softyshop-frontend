import{r as p,g as U,j as e,t as b,B as C}from"./index-98278e05.js";import{S as P}from"./Spinner-aa8e0f9e.js";import{e as S,f as y}from"./brandApi-198bc4cb.js";import{U as I,h as E,D as g}from"./upload-78155ae1.js";import{F as r,R as w,C as D}from"./index-2f28a3c1.js";import{I as R}from"./index-f00ae2eb.js";import{m as z}from"./index-f74f6955.js";import"./CheckOutlined-17eda048.js";const V=()=>{var d,o,m,c,u;const[x,h]=p.useState(null);console.log(x);const[l,j]=p.useState(),[t]=r.useForm(),[N]=S(),{id:i}=U(),{data:s,isLoading:F}=y(i),n=(d=s==null?void 0:s.data)==null?void 0:d.docs[0];if(console.log(n),F)return e.jsx(P,{});const f={name:((m=(o=s==null?void 0:s.data)==null?void 0:o.docs[0])==null?void 0:m.name)||"",images:[],isPublished:((u=(c=s==null?void 0:s.data)==null?void 0:c.docs[0])==null?void 0:u.isPublished)||!1},v=async()=>{try{const a=await t.validateFields();await N({id:i,data:{name:a.name,logo:l}}),z.success(`Brand of id:${i} updated`),t.resetFields()}catch(a){console.error("Error updating Brand:",a)}},B=[{uid:"-1",name:"Current Image",status:"done",url:l,thumbUrl:n.logo}];return e.jsxs("div",{className:"add-new-Product",children:[e.jsx("h1",{className:"title",children:"Edit Brand"}),e.jsx("div",{className:"container-add-Product",children:e.jsxs(r,{form:t,initialValues:f,children:[e.jsx(w,{gutter:[16,0],className:"name-Product",children:e.jsx(D,{span:22,children:e.jsx(r.Item,{name:"name",style:{marginBottom:0},rules:[{required:!0,message:"Please enter Brand name"}],children:e.jsx(R,{size:"large",placeholder:"Name",className:"input-custom"})})})}),e.jsx(r.Item,{className:"upload-images",name:"images",children:e.jsxs(I.Dragger,{defaultFileList:B,className:"drag-images",listType:"picture",accept:"image/*",maxCount:1,onChange:a=>E(a,h,j),beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-text",children:"Drag & drop Brand image here"}),e.jsxs("div",{className:"icon-drag",children:[e.jsx(g,{className:"divider"}),e.jsx("p",{className:"or",children:"OR"}),e.jsx(g,{className:"divider"})]}),e.jsx(b,{className:"btn-select",children:"Select Files"}),e.jsx("p",{className:"size-img",children:"Upload 280*280 image"})]})}),e.jsx(r.Item,{children:e.jsx(C,{className:"add-cat",onClick:v,type:"submit",children:"Save Brand"})})]})})]})};export{V as default};
