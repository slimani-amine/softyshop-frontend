import{g as C,r as o,j as e,B as x}from"./index-043bdbd9.js";import{e as E,f as S}from"./vendorApi-0bac3c3e.js";import{S as B}from"./Spinner-b2eac811.js";import{U as z,h as q,D as N}from"./upload-eadd2d27.js";import{F as s,R as i,C as m}from"./index-38fda43e.js";import{I as c}from"./index-10f1215d.js";import{m as j}from"./index-8ba13c34.js";import"./CheckOutlined-95f96f6c.js";const T=()=>{var g;const[t]=s.useForm(),{id:d}=C(),[f,b]=o.useState(null);console.log(f);const[u,p]=o.useState(),[v,h]=E(),{data:a,isLoading:P}=S(d),[y,F]=o.useState(!1),r=(g=a==null?void 0:a.data)==null?void 0:g.docs[0];o.useEffect(()=>{a&&(t.setFieldsValue({name:r.firstName,lastName:r.lastName,email:r.email,phoneNumber:r.phoneNumber}),p(r.picture),F(a.isVerified))},[a,t]);const U=async()=>{try{const l={...await t.validateFields(),isVerified:y};console.log(l,"object post");const I=await v({id:d,data:{firstName:l.name,lastName:l.lastName,email:l.email,phoneNumber:l.phoneNumber,picture:u}});if(console.log(I),h){console.log(h),console.error("Error updating vendor"),j.error("Error updating vendor");return}t.resetFields(),j.success("Vendor updated successfully")}catch(n){console.error("Error saving vendor",n)}};if(P)return e.jsx(B,{});const V=[{uid:"-1",name:"Current Image",status:"done",url:u,thumbUrl:r.picture}];return e.jsxs("div",{className:"add-new-Product",children:[e.jsx("h1",{className:"title",children:"Update Vendor"}),e.jsx("div",{className:"container-add-Product",children:e.jsxs(s,{form:t,children:[e.jsx(i,{gutter:[16,0],className:"name-Product",children:e.jsx(m,{span:22,children:e.jsx(s.Item,{name:"name",style:{marginBottom:0},rules:[{required:!0,message:"Please enter Vendor name"}],children:e.jsx(c,{size:"large",placeholder:"Name",className:"input-custom"})})})}),e.jsx(i,{gutter:[16,0],className:"name-Product",children:e.jsx(m,{span:22,children:e.jsx(s.Item,{name:"lastName",style:{marginBottom:0},rules:[{required:!0,message:"Please enter Last Name"}],children:e.jsx(c,{size:"large",placeholder:"Last Name",className:"input-custom"})})})}),e.jsx(i,{gutter:[16,0],className:"name-Product",children:e.jsx(m,{span:22,children:e.jsx(s.Item,{name:"email",style:{marginBottom:0},rules:[{required:!0,message:"Please enter email"},{type:"email",message:"Please enter a valid email"}],children:e.jsx(c,{size:"large",placeholder:"Email",className:"input-custom"})})})}),e.jsx(i,{gutter:[16,0],className:"name-Product",children:e.jsx(m,{span:22,children:e.jsx(s.Item,{name:"phoneNumber",style:{marginBottom:0},rules:[{required:!0,message:"Please enter phone number"},{min:8,message:"Phone number must be at least 8 characters long"},{pattern:/^\d+$/,message:"Phone number must contain only numbers"}],children:e.jsx(c,{size:"large",placeholder:"Phone Number",className:"input-custom"})})})}),e.jsx(s.Item,{className:"upload-images",name:"images",children:e.jsxs(z.Dragger,{defaultFileList:V,className:"drag-images",listType:"picture",accept:"image/*",maxCount:1,onChange:n=>q(n,b,p),beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-text",children:"Drag & drop Category image here"}),e.jsxs("div",{className:"icon-drag",children:[e.jsx(N,{className:"divider"}),e.jsx("p",{className:"or",children:"OR"}),e.jsx(N,{className:"divider"})]}),e.jsx(x,{className:"btn-select",children:"Select Files"}),e.jsx("p",{className:"size-img",children:"Upload 280*280 image"})]})}),e.jsx(s.Item,{children:e.jsx(x,{type:"submit",className:"add-cat",onClick:U,children:"Update Vendor"})})]})})]})};export{T as default};
