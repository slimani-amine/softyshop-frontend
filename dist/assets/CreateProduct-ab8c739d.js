import{u as z,r as N,b as U,p as D,o as k,q as R,j as e,t as A,B as Q}from"./index-98278e05.js";import{U as E,h as O,D as P}from"./upload-78155ae1.js";import{u as _}from"./categoryApi-1c3a31d3.js";import{u as M}from"./brandApi-198bc4cb.js";import{u as T}from"./creatorApi-6d4ee242.js";import{F as a,R as t,C as r}from"./index-2f28a3c1.js";import{I as y}from"./index-f00ae2eb.js";import{S as n}from"./index-9d1b7eeb.js";import{I as p}from"./index-64a1b756.js";import{m as g}from"./index-f74f6955.js";import"./CheckOutlined-17eda048.js";const{TextArea:L}=y,te=()=>{const v=z(),{data:d}=_(),f=((d==null?void 0:d.data.docs)||[]).map(s=>({label:s.name,value:s.id})),{data:m}=M(),b=((m==null?void 0:m.data.docs)||[]).map(s=>({label:s.name,value:s.id})),{data:u}=T(),I=((u==null?void 0:u.data.docs)||[]).map(s=>({label:s.name,value:s.id})),[F,C]=N.useState(null),[h,S]=N.useState([]);console.log(F);const x=U(s=>{var i;return(i=s.auth.user)==null?void 0:i.role.toLocaleUpperCase()});console.log(x);let o=[];if(x==="ADMIN"){const{data:s}=D();o=s==null?void 0:s.data.docs}else{const{data:s}=k();o=s==null?void 0:s.data.docs}console.log(o);const j=o==null?void 0:o.map(s=>({label:s.name,value:s.id}));console.log(j);const[c]=a.useForm(),q=s=>{console.log(s),console.log(s),c.resetFields()},[B]=R(),w=async()=>{try{console.log(h,"selected files");const s=await c.validateFields();console.log(s,"vallllllluuuuuuuueeeeeeeeesÃ ");const i={name:s.name,initialPrice:s.price,category_id:s.category,discount:s.discount,stockNumber:s.stock,creator_id:s.creator,brand_id:s.brand,images:h},l=await B({id:s.store,newProduct:i});"data"in l?(g.success("Product saved successfully!"),console.log(l.data),v("/products")):"error"in l?(g.error("Failed to save product. Please try again."),console.error("Error saving product",l.error)):g.error("Unexpected response from server. Please try again later."),console.log(l),c.resetFields()}catch(s){console.error("Error saving product",s)}};return e.jsxs("div",{className:"add-new-Product",children:[e.jsx("h1",{className:"title",children:"Add New Product"}),e.jsx("div",{className:"container-add-Product",children:e.jsxs(a,{form:c,onFinish:q,children:[e.jsx(t,{gutter:[16,0],className:"name-Product-new",children:e.jsx(r,{span:24,children:e.jsx(a.Item,{name:"name",style:{marginBottom:20},rules:[{required:!0,message:"Please enter Product name"}],children:e.jsx(y,{size:"large",placeholder:"Name",className:"input-custom",style:{color:"blue"}})})})}),e.jsx(t,{children:e.jsx(r,{span:24,children:e.jsx(a.Item,{name:"store",className:"Product",style:{marginBottom:20},rules:[{required:!0,message:"Product field must have at least 1 items"}],children:e.jsx(n,{size:"large",placeholder:"Store",className:"input-custom",options:j})})})}),e.jsx(t,{children:e.jsx(r,{span:24,children:e.jsx(a.Item,{name:"category",className:"Product",style:{marginBottom:20},rules:[{required:!0,message:"Product field must have at least 1 items"}],children:e.jsx(n,{size:"large",placeholder:"Category",className:"input-custom",options:f})})})}),e.jsx(t,{children:e.jsx(r,{span:24,children:e.jsx(a.Item,{name:"brand",className:"Product",style:{marginBottom:20},rules:[{required:!0,message:"Product field must have at least 1 items"}],children:e.jsx(n,{size:"large",placeholder:"Brand",className:"input-custom",options:b})})})}),e.jsx(t,{children:e.jsx(r,{span:24,children:e.jsx(a.Item,{name:"creator",className:"Product",style:{marginBottom:20},rules:[{required:!0,message:"Product field must have at least 1 items"}],children:e.jsx(n,{size:"large",placeholder:"Creator",className:"input-custom",options:I})})})}),e.jsx(a.Item,{className:"upload-images",name:"images",rules:[{required:!0,message:"Description is required!"}],children:e.jsxs(E.Dragger,{className:"drag-images",listType:"picture",accept:"image/*",multiple:!0,maxCount:3,onChange:s=>O(s,C,S),beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-text",children:"Drag & drop Product image here"}),e.jsxs("div",{className:"icon-drag",children:[e.jsx(P,{className:"divider"}),e.jsx("p",{className:"or",children:"OR"}),e.jsx(P,{className:"divider"})]}),e.jsx(A,{className:"btn-select",children:"Select Files"}),e.jsx("p",{className:"size-img",children:"Upload 280*280 image"})]})}),e.jsx(a.Item,{children:e.jsx(L,{placeholder:"Description",autoSize:{minRows:7,maxRows:20},name:"description"})}),e.jsxs(t,{gutter:[16,0],className:"name-Product",children:[e.jsx(r,{span:11,children:e.jsx(a.Item,{name:"price",style:{marginBottom:0},rules:[{required:!0,message:"Price is required!  "}],children:e.jsx(p,{name:"price",placeholder:"Regular Price",className:"input-custom",size:"large",style:{width:"100%"}})})}),e.jsx(r,{span:11,children:e.jsx(a.Item,{name:"discount",className:"SalePrice",style:{marginBottom:0},rules:[{required:!0,message:"Please enter sale price"}],children:e.jsx(p,{placeholder:"Discount",className:"input-custom",size:"large",style:{width:"100%"}})})})]}),e.jsx(t,{gutter:[16,0],className:"name-Product",children:e.jsx(r,{span:22,children:e.jsx(a.Item,{name:"stock",style:{marginBottom:0},rules:[{required:!0,message:"Price is required!  "}],children:e.jsx(p,{name:"stock",placeholder:"Stock Number",className:"input-custom",size:"large",style:{width:"100%"}})})})}),e.jsx(a.Item,{children:e.jsx(Q,{className:"add-cat",onClick:w,type:"submit",children:"Save Product"})})]})})]})};export{te as default};
