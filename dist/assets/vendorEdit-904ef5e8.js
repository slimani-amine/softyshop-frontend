import{u as C,g as S,r as i,j as e,B as N}from"./index-98278e05.js";import{e as B,f as E}from"./vendorApi-931e2668.js";import{S as z}from"./Spinner-aa8e0f9e.js";import{U as q,h as w,D as j}from"./upload-78155ae1.js";import{F as s,R as m,C as c}from"./index-2f28a3c1.js";import{I as d}from"./index-f00ae2eb.js";import{m as u}from"./index-f74f6955.js";import"./CheckOutlined-17eda048.js";const $=()=>{var x;const f=C(),[t]=s.useForm(),{id:p}=S(),[P,b]=i.useState(null);console.log(P);const[g,h]=i.useState(),[v]=B(),{data:a,isLoading:y}=E(p),[F,U]=i.useState(!1),r=(x=a==null?void 0:a.data)==null?void 0:x.docs[0];i.useEffect(()=>{a&&(t.setFieldsValue({name:r.firstName,lastName:r.lastName,email:r.email,phoneNumber:r.phoneNumber}),h(r.picture),U(a.isVerified))},[a,t]);const V=async()=>{try{const l={...await t.validateFields(),isVerified:F};console.log(l,"object post");const o=await v({id:p,data:{firstName:l.name,lastName:l.lastName,email:l.email,phoneNumber:l.phoneNumber,picture:g}});console.log(o),"data"in o?(u.success("Vendor updated successfully!"),t.resetFields(),f("/vendors")):"error"in o?(u.error("Failed to update product. Please try again."),console.error("Error updating product",o.error)):u.error("Unexpected response from server. Please try again later.")}catch(n){console.error("Error updating vendor",n)}};if(y)return e.jsx(z,{});const I=[{uid:"-1",name:"Current Image",status:"done",url:g,thumbUrl:r.picture}];return e.jsxs("div",{className:"add-new-Product",children:[e.jsx("h1",{className:"title",children:"Update Vendor"}),e.jsx("div",{className:"container-add-Product",children:e.jsxs(s,{form:t,children:[e.jsx(m,{gutter:[16,0],className:"name-Product",children:e.jsx(c,{span:22,children:e.jsx(s.Item,{name:"name",style:{marginBottom:0},rules:[{required:!0,message:"Please enter Vendor name"}],children:e.jsx(d,{size:"large",placeholder:"Name",className:"input-custom"})})})}),e.jsx(m,{gutter:[16,0],className:"name-Product",children:e.jsx(c,{span:22,children:e.jsx(s.Item,{name:"lastName",style:{marginBottom:0},rules:[{required:!0,message:"Please enter Last Name"}],children:e.jsx(d,{size:"large",placeholder:"Last Name",className:"input-custom"})})})}),e.jsx(m,{gutter:[16,0],className:"name-Product",children:e.jsx(c,{span:22,children:e.jsx(s.Item,{name:"email",style:{marginBottom:0},rules:[{required:!0,message:"Please enter email"},{type:"email",message:"Please enter a valid email"}],children:e.jsx(d,{size:"large",placeholder:"Email",className:"input-custom"})})})}),e.jsx(m,{gutter:[16,0],className:"name-Product",children:e.jsx(c,{span:22,children:e.jsx(s.Item,{name:"phoneNumber",style:{marginBottom:0},rules:[{required:!0,message:"Please enter phone number"},{min:8,message:"Phone number must be at least 8 characters long"},{pattern:/^\d+$/,message:"Phone number must contain only numbers"}],children:e.jsx(d,{size:"large",placeholder:"Phone Number",className:"input-custom"})})})}),e.jsx(s.Item,{className:"upload-images",name:"images",children:e.jsxs(q.Dragger,{defaultFileList:I,className:"drag-images",listType:"picture",accept:"image/*",maxCount:1,onChange:n=>w(n,b,h),beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-text",children:"Drag & drop Category image here"}),e.jsxs("div",{className:"icon-drag",children:[e.jsx(j,{className:"divider"}),e.jsx("p",{className:"or",children:"OR"}),e.jsx(j,{className:"divider"})]}),e.jsx(N,{className:"btn-select",children:"Select Files"}),e.jsx("p",{className:"size-img",children:"Upload 280*280 image"})]})}),e.jsx(s.Item,{children:e.jsx(N,{type:"submit",className:"add-cat",onClick:V,children:"Update Vendor"})})]})})]})};export{$ as default};
