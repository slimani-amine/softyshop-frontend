import{r as s,u as D,j as e,B as p,C as I,S as _}from"./index-043bdbd9.js";import{S as V,T as E}from"./SearchFilter-57a7ec44.js";import{a as A,b as B,c as G,d as T}from"./categoryApi-7b1bb8b4.js";import{l as Q}from"./lodash-2c2e27e5.js";import{M as U}from"./index-75c85fd2.js";import{m as $}from"./index-8ba13c34.js";import{S as q}from"./index-993a2efc.js";import"./CheckOutlined-95f96f6c.js";import"./index-08eb27d4.js";import"./index-10f1215d.js";function te(){const[l,C]=s.useState(1),[d,j]=s.useState(5),[o,y]=s.useState([]),[r,S]=s.useState("a"),{data:i}=A({perPage:d,page:l}),[b]=B(),[k]=G(),[f,h]=s.useState(!1),{data:n}=T(r),[P,g]=s.useState([]),u=(a,t)=>{C(a),j(t||5)};s.useEffect(()=>{r&&n?g(n.data.docs):i&&g(i.data.docs)},[r,i,n]);const N=Q.debounce(a=>{console.log("Search text for category list:",a),S(a)},500),v=async()=>{try{await b(o).unwrap(),$.success("Category deleted!"),h(!1)}catch{}},m=D(),w=a=>{m(`/categories/edit/${a}`)},L=()=>{m("/categories/create")},M=(a,t)=>{const c=a.target.checked;console.log(o),y(x=>c?[...x,t]:x.filter(R=>R!==t))},z={dataSource:P,columns:[{title:"Select",dataIndex:"id",render:(a,t)=>e.jsx(I,{checked:o.includes(t.id),onChange:c=>M(c,t.id)})},{title:"id",dataIndex:"id",key:"id",render:a=>e.jsx("p",{children:a})},{title:"name",className:"name",dataIndex:"name",render:a=>e.jsx("span",{className:"Category-name",children:a}),key:"name",sorter:(a,t)=>a.name.localeCompare(t.name)},{title:"icon",className:"icon-category",dataIndex:"icon",render:a=>e.jsx("img",{className:"img-cteagory",src:a,alt:""}),key:"icon"},{title:"Published",dataIndex:"published",key:"published",sorter:(a,t)=>(a.isPublished?1:0)-(t.isPublished?1:0),render:(a,t)=>e.jsx(q,{checked:t.isPublished,onClick:()=>{k({id:t.id,data:{isPublished:!t.isPublished}})}})},{title:"Action",key:"action",className:"action-category",render:a=>e.jsx(_,{children:e.jsx("div",{className:"icon-action",onClick:()=>w(a==null?void 0:a.id),children:e.jsxs("svg",{fill:"#7D879C",width:"16px",height:"16px",version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",stroke:"",children:[e.jsx("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),e.jsx("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),e.jsxs("g",{id:"SVGRepo_iconCarrier",children:[" ",e.jsxs("g",{children:[" ",e.jsxs("g",{children:[" ",e.jsx("path",{d:"M311.18,78.008L32.23,356.958L0.613,485.716c-1.771,7.209,0.355,14.818,5.604,20.067 c5.266,5.266,12.88,7.368,20.067,5.604l128.759-31.617l278.95-278.95L311.18,78.008z M40.877,471.123l10.871-44.271l33.4,33.4 L40.877,471.123z"})," "]})," "]})," ",e.jsxs("g",{children:[" ",e.jsxs("g",{children:[" ",e.jsx("path",{d:"M502.598,86.818L425.182,9.402c-12.536-12.536-32.86-12.536-45.396,0l-30.825,30.825l122.812,122.812l30.825-30.825 C515.134,119.679,515.134,99.354,502.598,86.818z"})," "]})," "]})," "]})]})})})}],headerStyle:{backgroundColor:"lightblue"},header:{style:{borderRadius:"px"}},pagination:{total:(i==null?void 0:i.data.meta.totalPages)+4,current:l,pageSize:d,onChange:u,onShowSizeChange:u}};return e.jsxs("div",{className:"Product-List",children:[e.jsx("h1",{children:"Category List"}),e.jsxs("div",{className:"header-Product-list",children:[e.jsx(V,{onSearchChange:N,placeholder:"Search Category.."}),e.jsxs(p,{className:"add-cat",onClick:L,children:[" ",e.jsx("span",{children:"+"})," Add Category"]})]}),e.jsxs("div",{className:"container-Product-List",children:[e.jsx("div",{className:"container-btn",children:e.jsx(p,{size:"sm",disabled:o.length===0,variant:o.length===0?"dark":"primary",onClick:v,children:"deleted"})}),e.jsx(E,{...z})]}),e.jsx(U,{title:"Confirm Deletion",visible:f,onCancel:()=>h(!1),okText:"Delete",cancelText:"Cancel",children:e.jsx("p",{children:"Are you sure you want to delete this category?"})})]})}export{te as default};
