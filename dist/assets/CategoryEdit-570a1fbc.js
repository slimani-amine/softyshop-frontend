import{r as g,g as y,j as e,q as F,C as v,B as I}from"./index-043bdbd9.js";import{S}from"./Spinner-b2eac811.js";import{c as U,f as E}from"./categoryApi-7b1bb8b4.js";import{U as w,h as B,D as h}from"./upload-eadd2d27.js";import{F as i,R as D,C as R}from"./index-38fda43e.js";import{I as k}from"./index-10f1215d.js";import{m as q}from"./index-8ba13c34.js";import"./CheckOutlined-95f96f6c.js";const A=()=>{var n,d,c,m,u;const[p,x]=g.useState(null);console.log(p);const[j,f]=g.useState(),[t]=i.useForm(),[N]=U(),{id:r}=y(),{data:s,isLoading:C}=E(r),l=(n=s==null?void 0:s.data)==null?void 0:n.docs[0];if(console.log(l,11),C)return e.jsx(S,{});const o={name:((c=(d=s==null?void 0:s.data)==null?void 0:d.docs[0])==null?void 0:c.name)||"",images:[],isPublished:((u=(m=s==null?void 0:s.data)==null?void 0:m.docs[0])==null?void 0:u.isPublished)||!1},P=async()=>{try{const a=await t.validateFields();console.log(a,"fg"),console.log({name:a.name,icon:"",isPublished:a.isPublished==="on"},"0000000000000000000000000"),await N({id:r,data:{name:a.name,icon:j,isPublished:a.isPublished==="on"}}),q.success(`Category of id:${r} updated`),t.resetFields()}catch(a){console.error("Error updating category:",a)}};console.log(l,"iufhgui");const b=[{uid:"-1",name:"Current Image",status:"done",url:l.icon}];return e.jsxs("div",{className:"add-new-Product",children:[e.jsx("h1",{className:"title",children:"Edit Category"}),e.jsx("div",{className:"container-add-Product",children:e.jsxs(i,{form:t,initialValues:o,children:[e.jsx(D,{gutter:[16,0],className:"name-Product",children:e.jsx(R,{span:22,children:e.jsx(i.Item,{name:"name",style:{marginBottom:0},rules:[{required:!0,message:"Please enter Category name"}],children:e.jsx(k,{size:"large",placeholder:"Name",className:"input-custom"})})})}),e.jsx(i.Item,{className:"upload-images",name:"images",children:e.jsxs(w.Dragger,{defaultFileList:b,className:"drag-images",listType:"picture",accept:"image/*",maxCount:1,onChange:a=>B(a,x,f),beforeUpload:()=>!1,children:[e.jsx("p",{className:"ant-upload-text",children:"Drag & drop Category image here"}),e.jsxs("div",{className:"icon-drag",children:[e.jsx(h,{className:"divider"}),e.jsx("p",{className:"or",children:"OR"}),e.jsx(h,{className:"divider"})]}),e.jsx(F,{className:"btn-select",children:"Select Files"}),e.jsx("p",{className:"size-img",children:"Upload 280*280 image"})]})}),e.jsx(i.Item,{name:"isPublished",children:e.jsxs("div",{className:"feutured",children:[e.jsx(v,{defaultChecked:o.isPublished})," ",e.jsx("span",{children:"Publish category"})]})}),e.jsx(i.Item,{children:e.jsx(I,{className:"add-cat",onClick:P,type:"submit",children:"Save Category"})})]})})]})};export{A as default};
