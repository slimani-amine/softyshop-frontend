import{r as s,a as E,g as y,w as u,e as U,j as a,B as R,x as p,y as h}from"./index-98278e05.js";const S=i=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 38 38",width:38,height:38,...i},s.createElement("defs",null,s.createElement("image",{width:12,height:12,id:"addProductDetails",href:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMAgMAAAArG7R0AAAAAXNSR0IB2cksfwAAAAxQTFRF9Pj75pil32l62DhPCLrHGgAAAAR0Uk5TAP///7MtQIgAAAAaSURBVHicY2QQecPIoHEDBWeFvAZjdHGgWgA3jQ1f2QbzWgAAAABJRU5ErkJggg=="})),s.createElement("style",null),s.createElement("use",{href:"#addProductDetails",x:13,y:13})),B=i=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 38 38",width:38,height:38,...i},s.createElement("defs",null,s.createElement("image",{width:39,height:39,id:"removeProductDetails",href:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAAnBAMAAAB+jUwGAAAAAXNSR0IB2cksfwAAACRQTFRF9Pj79Pj77szU6au255qn55il8uvv67nD8eHm9PX57s3U3Vhsagm5wgAAAAx0Uk5T/wAAAAAAAAAAAAD/5IqGTgAAAGlJREFUeJxjZMACGAUZlRSRBd7d+/CeUUwxqANZsP32u/mMwn0FqHo5xc8zqr9CNzGxj9HiJrpgUS2j5wl0weYcxsAD6IIsr0eWINcCEPktgbDgIHQ8HQSxJhusCQxrUsSaaLEmb2wZAQAsgFgoF4XG+AAAAABJRU5ErkJggg=="})),s.createElement("style",null),s.createElement("use",{href:"#removeProductDetails",x:0,y:-1}));function C(){var o,m,g;const i=E(),{productId:x}=y(),[w,j]=s.useState([{id:0,name:"",images:"",rating:"",price:0,brand:{id:0,name:""},category:{id:0,name:""},store:{id:0,name:""},availability:!1,stockNumber:0}]);s.useEffect(()=>{(async()=>{try{const v=await(await fetch(`${u}api/products?id=${x}`)).json();j(v.data.docs)}catch(l){return console.log(l),l}})()},[u]);const e=w[0],f=e.images.length&&JSON.parse(e==null?void 0:e.images),[N,c]=s.useState(!1),r=U(n=>n.cart.cart),[t,A]=s.useState(0);s.useEffect(function(){var n;A(((n=r==null?void 0:r.find(l=>l.product.id==e.id))==null?void 0:n.quantity)||0)},[A,r]);async function d(){console.log(t),c(!0),Promise.all([await i(p({quantity:t+1,productId:e.id+""})),i(h())]),c(!1)}async function b(){console.log(t),!(t<1)&&(c(!0),Promise.all([await i(p({quantity:t-1,productId:e.id+""})),i(h())]),c(!1))}return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"product-details",children:[a.jsx("div",{className:"image-wrapper",children:a.jsx("img",{width:400,height:400,className:"",src:f[0],alt:""})}),a.jsxs("div",{className:"product-info",children:[a.jsx("h1",{className:"product-name",children:e.name}),a.jsxs("div",{className:"brand-and-category",children:[a.jsxs("p",{className:"brand",children:[a.jsx("span",{className:"brand-title",children:"Brand:"})," ",(o=e==null?void 0:e.brand)==null?void 0:o.name]}),a.jsxs("p",{className:"brand",children:[a.jsx("span",{className:"brand-title",children:"category:"})," ",(m=e==null?void 0:e.category)==null?void 0:m.name]})]}),a.jsxs("h2",{className:"price",children:["$",e.price]}),a.jsxs("p",{className:"stock",children:["Stock"," ",e!=null&&e.availability?`Available: (${e==null?void 0:e.stockNumber} ${(e==null?void 0:e.stockNumber)==1?"book":"books"}  remaining)`:"Unavailable"]}),t==0&&a.jsx(R,{onClick:d,disabled:N,label:"Add To Cart"}),t>0&&a.jsxs("div",{className:"buttons-product-details",children:[a.jsx(B,{className:"add-product-details",onClick:()=>{b()}}),a.jsx("p",{className:"quantity",children:t<=9?`0${t}`:t}),a.jsx(S,{onClick:()=>{d()},className:"add-product-details"})]}),a.jsxs("p",{className:"store",children:[a.jsx("span",{className:"store-title",children:"Sold By:"})," ",(g=e==null?void 0:e.store)==null?void 0:g.name]})]})]})})}export{C as default};
